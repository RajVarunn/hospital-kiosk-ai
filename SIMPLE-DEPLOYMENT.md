# Simple Health Assessment Deployment Guide

This guide will help you deploy the simplified health assessment application that uses Bedrock API directly without DynamoDB.

## 1. Deploy the Lambda Function

### Option 1: Using AWS Console

1. Go to AWS Lambda console
2. Click "Create function"
3. Choose "Author from scratch"
4. Enter a function name (e.g., "simple-health-assessment")
5. Select Node.js 18.x for the runtime
6. Click "Create function"
7. Copy the code from `simple-lambda.js` and paste it into the code editor
8. Click "Deploy"

### Option 2: Using AWS CLI

1. Create a deployment package:
   ```bash
   zip -j simple-lambda.zip simple-lambda.js
   ```

2. Create the Lambda function:
   ```bash
   aws lambda create-function \
     --function-name simple-health-assessment \
     --runtime nodejs18.x \
     --handler simple-lambda.handler \
     --zip-file fileb://simple-lambda.zip \
     --role arn:aws:iam::<your-account-id>:role/<your-lambda-role>
   ```

## 2. Set Up API Gateway

1. Go to API Gateway console
2. Click "Create API"
3. Choose "REST API" and click "Build"
4. Enter a name (e.g., "health-assessment-api")
5. Click "Create API"
6. Click "Create Resource"
7. Enter "health-assessment" for the resource name
8. Click "Create Resource"
9. With the new resource selected, click "Create Method"
10. Select "POST" and click the checkmark
11. Set Integration type to "Lambda Function"
12. Select your Lambda function ("simple-health-assessment")
13. Click "Save"
14. Click "Enable CORS" and configure as needed
15. Click "Deploy API"
16. Create a new stage (e.g., "prod")
17. Note the Invoke URL - you'll need this for the frontend

## 3. Add IAM Permissions for Bedrock

1. Go to IAM console
2. Find the role used by your Lambda function
3. Click "Add permissions" > "Attach policies"
4. Create a new policy with this JSON:
   ```json
   {
     "Version": "2012-10-17",
     "Statement": [
       {
         "Effect": "Allow",
         "Action": [
           "bedrock:InvokeModel",
           "bedrock:InvokeModelWithResponseStream"
         ],
         "Resource": "*"
       }
     ]
   }
   ```
5. Name it "BedrockInvokePolicy"
6. Attach this policy to your Lambda role

## 4. Update the Frontend

1. Open `frontend/src/services/healthService.js`
2. Replace the API_URL with your API Gateway Invoke URL:
   ```javascript
   const API_URL = 'https://your-api-gateway-url.amazonaws.com/prod/health-assessment';
   ```

3. Add the SimpleHealthAssessment component to your routes:
   ```javascript
   // In your routes file
   import SimpleHealthAssessment from './components/SimpleHealthAssessment';
   
   // Add this to your routes
   <Route path="/simple-assessment" element={<SimpleHealthAssessment />} />
   ```

## 5. Test the Application

1. Deploy your frontend application
2. Navigate to the `/simple-assessment` route
3. Enter symptoms and vitals
4. Click "Generate Health Assessment"
5. You should see a diagnosis and health tips generated by Bedrock

## Troubleshooting

If you encounter issues:

1. Check CloudWatch logs for your Lambda function
2. Verify that the IAM role has the necessary permissions
3. Ensure that you have access to the Bedrock models
4. Check that CORS is properly configured in API Gateway
5. Verify that the API URL in the frontend is correct

## Next Steps

- Add authentication to secure your API
- Implement caching to improve performance
- Add error monitoring and logging
- Enhance the UI with more features